# mapa

**Map Analyzer**

`mapa` is a command-line tool designed to parse and analyze map files generated by linkers. It extracts and organizes information such as archive members, discarded sections, memory configurations, and linker script memory maps into structured formats for further analysis.

## Features

- Parse and extract:
  - Archive members included to satisfy references.
  - Discarded input sections.
  - Memory configuration details.
  - Linker script and memory map details.
- Save extracted data into structured files:
  - Archive members: `archive_members.tsv`
  - Discarded sections: `discarded_sections.tsv`
  - Memory configuration: `memory_configuration.tsv`
- Output linker script memory map in JSON format.

## Installation

1. Ensure you have [Rust](https://www.rust-lang.org/) installed.
2. Clone the repository:
   ```sh
   git clone https://github.com/laborless/mapa.git
   cd mapa
   ```
3. Build the application:
   ```sh
   cargo build --release
   ```

## Usage

Run the `mapa` application with the following command:

```sh
mapa [OPTIONS] <PATH>
```

### Options

- `-n, --count <COUNT>`: Number of times to greet (default: 1).
- `<PATH>`: Path to the map file to analyze.

### Example

To analyze a map file located at `test.map`:

```sh
mapa test.map
```

This will:
1. Parse the map file.
2. Save extracted data into `.tsv` files.
3. Print the linker script memory map in JSON format.

## Output Files

- `archive_members.tsv`: Contains archive members included to satisfy references.
- `discarded_sections.tsv`: Contains discarded input sections.
- `memory_configuration.tsv`: Contains memory configuration details.

## Development

To run the application in debug mode:

```sh
cargo run -- test.map
```

## Cross-Compile
### Download targets
```sh
rustup target add x86_64-unknown-linux-gnu
rustup target add x86_64-pc-windows-gnu
rustup target add aarch64-unknown-linux-gnu
```
### Download Cross-compilers
#### Ubuntu/Debian
```sh
sudo apt install gcc-mingw-w64
sudo apt install gcc-aarch64-linux-gnu
```
#### Fedora
```sh
sudo dnf install mingw64-gcc
sudo dnf install gcc-aarch64-linux-gnu
```
### Build for Each Target
```sh
cargo build --target x86_64-unknown-linux-gnu --release
cargo build --target x86_64-pc-windows-gnu --release
cargo build --target aarch64-unknown-linux-gnu --release
```

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.

## Contributing

Contributions are welcome! Feel free to open issues or submit pull requests.

## Contact

For questions or feedback, please open an issue in the repository.